



Network Working Group                                           T. Pauly
Internet-Draft                                                E. Kinnear
Intended status: Standards Track                                 C. Wood
Expires: October 14, 2019                                     Apple Inc.
                                                          April 12, 2019


                        Web Provisioning Domains
                       draft-pauly-web-pvd-latest

Abstract

   This document defines a mechanism for web services, such as HTTP
   servers and Content Delivery Networks, to provide Provisioning Domain
   information to client hosts.  This information includes policies for
   using encrypted DNS services, encrypted SNI keys for use in TLS, and
   protocol capabilities supported by the web services.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 14, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of




Pauly, et al.           Expires October 14, 2019                [Page 1]

Internet-Draft               QUIC Datagrams                   April 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Specification of Requirements . . . . . . . . . . . . . .   3
   2.  Protocol  . . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Client Behavior . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   3
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   4
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   Provisioning Domains (PvDs) are defined as consistent sets of network
   configuration information [RFC7556].  This information includes
   configuration for how a client host should issue DNS queries and
   route its traffic.  Traditionally, a PvD is defined by a local
   network element (such as a router) or by a VPN server.  Routers can
   provide multiple PvDs, as defined in
   [I-D.ietf-intarea-provisioning-domains].

   However, client hosts may want to use DNS configurations other than
   the one locally provisioned to use encrypted DNS protocols to prevent
   interception or modification by untrusted parties along the network
   path.  Protocols that can improve the privacy stance of a client when
   using DNS or creating TLS connections include DNS-over-TLS [RFC7858],
   DNS-over-HTTPS [RFC8484], and encrypted Server Name Indication (ENSI)
   [I-D.ietf-tls-esni].

   There are several concerns around a client host using such privacy-
   enhancing mechanisms for generic system traffic.  A remote service
   that provides encrypted DNS may not provide correct answers for
   locally available resources, or private resources (such as domains
   only accessible over a private network).  A remote service may also
   itself be untrusted from a privacy perspective: while encryption will
   prevent on-path observers from seeing hostnames, the client host
   needs to trust the encrypted DNS service to not store or misuse
   queries made to it.

   Client systems are left with choosing between one of the following
   stances:




Pauly, et al.           Expires October 14, 2019                [Page 2]

Internet-Draft               QUIC Datagrams                   April 2019


   1.  Send all user DNS queries to a particular encrypted DNS service,
       which requires establishing user trust of the service.  This can
       lead to resolution failures for private enterprise domains.

   2.  Allow the user or another entity to configure local policy for
       which domains to send to local, private, or encrypted resolvers.
       This provides more granularity, but increases the burden on the
       user.

   3.  Only use locally configured DNS servers, opportunistically using
       encrypted DNS to the local server when available.  This provides
       little benefit over not using encrypted DNS at all.

   This document defines a protocol to allow servers to dynamically
   provision clients with available PvD configurations to resolve and
   route traffic for which the servers are authoritative.  These PvDs,
   to contrast locally-defined PvDs, are referred to as "Web PvDs".

   A Web PvD configuration that is signed by an authority for
   "example.com" can define how to reach an encrypted DNS service that
   can resolve subdomains within "example.com", provide access to keys
   to use for ESNI, and define how clients can optimally access hosts
   for "example.com".

1.1.  Specification of Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

2.  Protocol

   Define the protocol.

3.  Client Behavior

   Web PvDs

4.  Security Considerations

   Make it secure!








Pauly, et al.           Expires October 14, 2019                [Page 3]

Internet-Draft               QUIC Datagrams                   April 2019


5.  IANA Considerations

   Consider IANA.

6.  Acknowledgments

   Thanks!

7.  References

7.1.  Normative References

   [I-D.ietf-intarea-provisioning-domains]
              Pfister, P., Vyncke, E., Pauly, T., Schinazi, D., and W.
              Shao, "Discovering Provisioning Domain Names and Data",
              draft-ietf-intarea-provisioning-domains-04 (work in
              progress), March 2019.

   [I-D.ietf-tls-esni]
              Rescorla, E., Oku, K., Sullivan, N., and C. Wood,
              "Encrypted Server Name Indication for TLS 1.3", draft-
              ietf-tls-esni-03 (work in progress), March 2019.

   [RFC7556]  Anipko, D., Ed., "Multiple Provisioning Domain
              Architecture", RFC 7556, DOI 10.17487/RFC7556, June 2015,
              <https://www.rfc-editor.org/info/rfc7556>.

   [RFC7858]  Hu, Z., Zhu, L., Heidemann, J., Mankin, A., Wessels, D.,
              and P. Hoffman, "Specification for DNS over Transport
              Layer Security (TLS)", RFC 7858, DOI 10.17487/RFC7858, May
              2016, <https://www.rfc-editor.org/info/rfc7858>.

   [RFC8484]  Hoffman, P. and P. McManus, "DNS Queries over HTTPS
              (DoH)", RFC 8484, DOI 10.17487/RFC8484, October 2018,
              <https://www.rfc-editor.org/info/rfc8484>.

7.2.  Informative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.





Pauly, et al.           Expires October 14, 2019                [Page 4]

Internet-Draft               QUIC Datagrams                   April 2019


Authors' Addresses

   Tommy Pauly
   Apple Inc.
   One Apple Park Way
   Cupertino, California 95014
   United States of America

   Email: tpauly@apple.com


   Eric Kinnear
   Apple Inc.
   One Apple Park Way
   Cupertino, California 95014
   United States of America

   Email: ekinnear@apple.com


   Chris Wood
   Apple Inc.
   One Apple Park Way
   Cupertino, California 95014
   United States of America

   Email: cawood@apple.com
























Pauly, et al.           Expires October 14, 2019                [Page 5]
